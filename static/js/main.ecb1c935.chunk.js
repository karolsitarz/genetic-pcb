(this["webpackJsonpgenetic-pcb"]=this["webpackJsonpgenetic-pcb"]||[]).push([[0],{25:function(t,n,e){},32:function(t,n,e){"use strict";e.r(n);var r,c,a=e(2),o=e.n(a),i=e(13),u=e.n(i),s=(e(25),e(3)),l=e(0),d=e(14),f=e(18).a.div(r||(r=Object(d.a)(['\n  width: 100%;\n\n  &::before {\n    content: "";\n    display: block;\n    padding-bottom: ',"%;\n  }\n\n  > div {\n    width: calc(100% * ",");\n    height: calc(100% * ",");\n    left: calc(100% / "," / 2);\n    top: calc(100% / "," / 2);\n\n    > button {\n      width: calc(100% / ",");\n      height: calc(100% / ",');      \n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n\n      div {\n        width: 75%;\n        border-radius: 50%;\n        max-width: 0.75rem;\n        &::after {\n          content: "";\n          padding-bottom: 100%;\n          display: block;\n        }\n      }\n    }\n'])),(function(t){return 100*t.height/t.width}),(function(t){var n=t.width;return"".concat(n," / ").concat(n+1)}),(function(t){var n=t.height;return"".concat(n," / ").concat(n+1)}),(function(t){return t.width+1}),(function(t){return t.height+1}),(function(t){return t.width}),(function(t){return t.height})),b=e(4),h=e(16),j=e(1),O=function(t){var n=t.value,e=t.onChange,r=t.children,c=t.min,o=t.max,i=t.step,u=t.className,s=t.label,d=Object(a.useState)(n),f=Object(l.a)(d,2),O=f[0],g=f[1];return Object(j.jsxs)("label",{className:"block ".concat(u),children:[Object(j.jsxs)("div",{className:"flex items-center justify-between",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700 mr-4",children:s}),Object(j.jsx)("span",{className:"text-gray-500 font-bold",children:r?r(O):O})]}),Object(j.jsx)("div",{className:"py-4 w-full",children:Object(j.jsx)(h.Range,{values:[O],onChange:function(t){var n=Object(l.a)(t,1)[0];return g(n)},onFinalChange:function(t){var n=Object(l.a)(t,1)[0];return e(n)},renderTrack:function(t){var n=t.props,e=t.children;return Object(j.jsx)("div",Object(b.a)(Object(b.a)({className:"w-full h-2 md:h-1 rounded-full bg-gray-300 focus-within:bg-blue-200"},n),{},{children:e}))},renderThumb:function(t){var n=t.props;return Object(j.jsx)("div",Object(b.a)({className:"h-6 w-6 md:h-4 md:w-4 rounded-full bg-blue-500 shadow focus:outline-none focus:bg-blue-700"},n))},min:c,max:o,step:i})})]})},g=["red","yellow","green","blue","purple","pink"],v=[0,38,160,217,258,330],m=[500,300,900],p=[60,80,40],x=function(t){return[g[t%g.length],m[Math.floor(t/g.length)%m.length]]},w=function(t){return[v[t%v.length],p[Math.floor(t/v.length)%p.length]]},y=e(19),N=function(t,n){return t[0]===n[0]&&t[1]===n[1]},S=function(t,n){return Object(s.a)(new Array(t)).map((function(t,e){return n(e)}))},k=function(t,n){return[t.slice(0,n),t.slice(n)]},M=e(8),C=e.n(M),E=e(11),I=e(7);!function(t){t.Up="Up",t.Down="Down",t.Left="Left",t.Right="Right"}(c||(c={}));var P=[c.Up,c.Right,c.Down,c.Left],R=function(t,n){var e=(W(t)+Math.floor(n/90))%P.length;return P[e]},W=function(t){var n=P.findIndex((function(n){return n===t}));if(n<0)throw new Error("Incorrect direction passed");return n},T=function(t){if(t===c.Up)return[0,-1];if(t===c.Down)return[0,1];if(t===c.Left)return[-1,0];if(t===c.Right)return[1,0];throw new Error("Incorrect direction passed")},B=function(t){return t===c.Left||t===c.Right},D=function(t,n){return Math.floor(Math.random()*(n-t))+t},L=function(){return Math.random()<.5},U=function(t,n){var e=Object(l.a)(t,2),r=e[0],c=e[1],a=Object(l.a)(n,2),o=a[0],i=a[1],u=T(i),s=Object(l.a)(u,2),d=s[0],f=s[1];return S(o,(function(t){return[r+(t+1)*d,c+(t+1)*f]}))},_=function(t){var n=t.reduce((function(t,n){return t+Object(l.a)(n,2)[1]}),0);return t.reduce((function(t,e){var r,c,a=t.weighed,o=t.progress,i=Object(l.a)(e,2),u=i[0],d=i[1],f=(r=d/n,c=4,Math.round(r*Math.pow(10,c))/Math.pow(10,c));if(0===f)return{weighed:a,progress:o};var b=f+o;return{weighed:[].concat(Object(s.a)(a),[[u,b]]),progress:b}}),{weighed:[],progress:0}).weighed},F=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return S(n,(function(){var n=Math.random(),e=t.find((function(t){return Object(l.a)(t,2)[1]>n}))||t[0];return Object(l.a)(e,1)[0]}))},G=.5,J=function(t,n,e,r){var a=Object(l.a)(t,2),o=a[0],i=a[1],u=Object(l.a)(i,2),d=u[0],f=u[1],b=function t(r){if(N(r,i))return[];var a=Object(l.a)(r,2),o=a[0],u=a[1],b=0===o?0:1,h=o===n-1?0:1,j=0===u?0:1,O=u===e-1?0:1;o>d&&(b+=(o-d)*G),o<d&&(h+=(d-o)*G),u>f&&(j+=(u-f)*G),u<f&&(O+=(f-u)*G);var g=[[c.Left,b],[c.Right,h],[c.Up,j],[c.Down,O]],v=F(_(g),1),m=Object(l.a)(v,1)[0],p=m===c.Up?u:m===c.Down?e-u:m===c.Left?o:n-o,x=D(1,p);(o===d&&function(t){return t===c.Up||t===c.Down}(m)||u===f&&B(m))&&(U(r,[x,m]).find((function(t){return N(t,i)}))&&(x=Math.abs(o-d+u-f)));var w=m===c.Up?[o,u-x]:m===c.Down?[o,u+x]:m===c.Left?[o-x,u]:[o+x,u];return[[x,m]].concat(Object(s.a)(t(w)))}(o);return{start:o,index:r,segments:z(b)}},z=function(t){return t.length<2?t:t.reduce((function(t,n){if(0===t.length)return[n];var e=Object(l.a)(n,2),r=e[0],c=e[1],a=k(t,-1),o=Object(l.a)(a,2),i=o[0],u=Object(l.a)(o[1],1)[0],d=Object(l.a)(u,2),f=d[0],b=d[1];if(b===c)return[].concat(Object(s.a)(i),[[f+r,c]]);if(b===R(c,180)){var h=f-r;if(0===h)return i;var j=h<0?c:R(c,180);return[].concat(Object(s.a)(i),[[Math.abs(h),j]])}return[].concat(Object(s.a)(t),[[r,c]])}),[])},A=function(t,n){if(D(0,100)>n.mutationChance)return t;var e=t.segments,r=n.width,c=n.height,a=D(0,t.segments.length),o=function(t,n,e){var r=Object(l.a)(t,2),c=r[0],a=r[1],o=R(a,L()?90:270),i=D(1,B(a)?e:n);if(1==c||L())return[[i,o],[c,a],[i,R(o,180)]];var u=D(1,c);return L()?[[i,o],[u,a],[i,R(o,180)],[c-u,a]]:[[u,a],[i,o],[c-u,a],[i,R(o,180)]]}(e[a],r,c),i=[].concat(Object(s.a)(e.slice(0,a)),Object(s.a)(o),Object(s.a)(e.slice(a+1))),u=z(i);return Object(b.a)(Object(b.a)({},t),{},{segments:u})},H=function(t){var n,e=t.segments,r=t.start;return{index:t.index,start:(n=r,[n[0],n[1]]),segments:e.map((function(t){return function(t){return[t[0],t[1]]}(t)}))}},q=function(t){return t.paths.reduce((function(t,n){return[].concat(Object(s.a)(t),Object(s.a)(function(t){var n=t.segments,e=t.start,r=t.index,c={coordinates:[e],start:e};return n.reduce((function(t,n){var e=t.coordinates,r=t.start,c=U(r,n),a=k(c,-1),o=Object(l.a)(a,2),i=Object(l.a)(o[1],1)[0];return{coordinates:[].concat(Object(s.a)(e),Object(s.a)(c)),start:i}}),c).coordinates.map((function(t){var n=Object(l.a)(t,2);return[n[0],n[1],r]}))}(n)))}),[])},K=function(t,n){var e=n.width,r=n.height,c=q(t);return{outOfBounds:Object.entries(c.filter((function(t){var n=Object(l.a)(t,2),c=n[0],a=n[1];return c<0||a<0||c>=e||a>=r})).reduce((function(t,n){var e,r=Object(l.a)(n,3)[2];return Object(b.a)(Object(b.a)({},t),{},Object(I.a)({},r,(null!==(e=null===t||void 0===t?void 0:t[r])&&void 0!==e?e:0)+1))}),{})),duplication:Object.values(c.reduce((function(t,n){var e,r=Object(l.a)(n,3),c=r[0],a=r[1],o=r[2];return Object(b.a)(Object(b.a)({},t),{},Object(I.a)({},"".concat(c,"-").concat(a),[].concat(Object(s.a)(null!==(e=null===t||void 0===t?void 0:t["".concat(c,"-").concat(a)])&&void 0!==e?e:[]),[o])))}),{})).filter((function(t){return t.length>1})),length:c.length}},Q=function(t,n){var e=function(t,n){var e=t.paths,r=n.outOfBoundsWeights,c=n.duplicationWeights,a=K(t,n),o=a.outOfBounds.reduce((function(t,n){var e=Object(l.a)(n,2),c=e[0],a=e[1];return t+Math.pow(r[parseInt(c)],a)}),0),i=a.duplication.reduce((function(t,n){return t+n.reduce((function(t,n){return t*c[n]}),1)}),0),u=e.reduce((function(t,n){return t+n.segments.length}),0);return 1/(a.length+u+o+i)}(t,n);return Object(b.a)(Object(b.a)({},t),{},{fitness:e})},V=function(t,n,e,r,c){var a=S(r,(function(){return function(t,n,e){return{paths:e.map((function(e,r){return J(e,t,n,r)}))}}(t,n,e)}));return{width:t,height:n,connectors:e,population:a,duplicationWeights:S(e.length,(function(){return t*n})),outOfBoundsWeights:S(e.length,(function(){return t*n})),mutationChance:c}},X=function(t){var n=t.population.map((function(n){return Q(n,t)}));return Object(b.a)(Object(b.a)({},t),{},{population:n})},Y=function(t){var n=t.population;return n.reduce((function(t,n){if(null==(null===n||void 0===n?void 0:n.fitness))throw new Error("The fitness has not been calculated!");if(null==(null===t||void 0===t?void 0:t.fitness))throw new Error("The fitness has not been calculated!");return n.fitness>t.fitness?n:t}),n[0])},Z=function(t,n){var e=n.duplicationWeights,r=n.outOfBoundsWeights,c=Y(n);if(null==(null===t||void 0===t?void 0:t.fitness))throw new Error("The fitness has not been calculated!");if(null==(null===c||void 0===c?void 0:c.fitness))throw new Error("The fitness has not been calculated!");if(t.fitness<=c.fitness)return n;var a=K(c,n),o=new Set;a.outOfBounds.forEach((function(t){var n=Object(l.a)(t,1)[0];return o.add(n)}));var i=r.map((function(t,n){return o.has(n.toString())?t+1:t})),u=new Set;a.duplication.forEach((function(t){return t.forEach((function(t){return u.add(t)}))}));var s=e.map((function(t,n){return u.has(n)?t+1:t}));return Object(b.a)(Object(b.a)({},n),{},{outOfBoundsWeights:i,duplicationWeights:s})},$=function(t){var n=t.population,e=_(n.map((function(t){if(null==t.fitness)throw new Error("Fitness not calculated");return[t,t.fitness]}))),r=n.map((function(){var n=F(e);return function(t,n){var e=t.paths.map((function(t){return A(t,n)}));return Object(b.a)(Object(b.a)({},t),{},{paths:e})}(function(t,n){var e=t.paths,r=n.paths,c=D(0,e.length+1);return{paths:[].concat(Object(s.a)(e.slice(0,c).map((function(t){return H(t)}))),Object(s.a)(r.slice(c).map((function(t){return H(t)}))))}}(n[0],n[1]),t)}));return Object(b.a)(Object(b.a)({},t),{},{population:r})},tt=function(){var t=Object(E.a)(C.a.mark((function t(n){var e,r,c,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,r=function(){var t=Object(E.a)(C.a.mark((function t(n,c){var a,o,i,u;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window._setGeneration(e),window._isRunning){t.next=3;break}return t.abrupt("return");case 3:return e++%5===0&&window._setIndividual(c),a=$(n),o=X(a),i=Z(c,o),u=Y(i),t.next=10,new Promise((function(t){return setTimeout(t,1)}));case 10:return t.next=12,r(i,u);case 12:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),c=X(n),a=Y(c),t.next=6,r(c,a);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),nt=e(17),et=function(t){return 50*(t+1)},rt=function(t){var n=t.individual,e=t.problem,r=Object(a.useRef)(null),c=e.width,o=e.height,i=e.connectors;return Object(a.useEffect)((function(){var t=r.current;if(t){var e=t.getContext("2d");if(e){e.fillStyle="#dddddd",e.clearRect(0,0,t.width,t.height);for(var a=0;a<c;a++)for(var u=et(a),s=0;s<o;s++){var d=et(s);e.beginPath(),e.arc(u,d,6,0,2*Math.PI),e.fill(),e.closePath()}for(var f=0;f<i.length;f++){var b=Object(l.a)(i[f],2),h=Object(l.a)(b[0],2),j=h[0],O=h[1],g=Object(l.a)(b[1],2),v=g[0],m=g[1],p=w(f),x=Object(l.a)(p,2),y=x[0],N=x[1];e.fillStyle="hsl(".concat(y,", 90%, ").concat(N,"%)"),e.beginPath(),e.arc(et(j),et(O),6*1.2,0,2*Math.PI),e.arc(et(v),et(m),6*1.2,0,2*Math.PI),e.fill(),e.closePath()}if(n){var S=n.paths;e.lineWidth=6,e.lineCap="round",e.lineJoin="round";for(var k=0;k<S.length;k++){var M=S[k],C=M.start,E=M.segments,I=Object(l.a)(C,2),P=I[0],R=I[1],W=w(k),B=Object(l.a)(W,2),D=B[0],L=B[1];e.strokeStyle="hsl(".concat(D,", 90%, ").concat(L,"%)"),e.beginPath(),e.moveTo(et(P),et(R));var U,_=Object(nt.a)(E);try{for(_.s();!(U=_.n()).done;){var F=Object(l.a)(U.value,2),G=F[0],J=F[1],z=T(J),A=Object(l.a)(z,2),H=A[0],q=A[1],K=P+G*H,Q=R+G*q;e.lineTo(et(K),et(Q)),P=K,R=Q}}catch(V){_.e(V)}finally{_.f()}e.stroke(),e.closePath()}}}}}),[n,e]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("canvas",{ref:r,className:"absolute left-0 top-0 bottom-0 right-0 w-full h-full",width:50*(c+1),height:50*(o+1)})})},ct=function(){var t=Object(a.useState)(8),n=Object(l.a)(t,2),e=n[0],r=n[1],c=Object(a.useState)(8),o=Object(l.a)(c,2),i=o[0],u=o[1],d=Object(a.useState)(100),b=Object(l.a)(d,2),h=b[0],v=b[1],p=Object(a.useState)(10),w=Object(l.a)(p,2),k=w[0],M=w[1],C=Object(a.useState)(null),E=Object(l.a)(C,2),I=E[0],P=E[1],R=Object(a.useState)([]),W=Object(l.a)(R,2),T=W[0],B=W[1],D=Object(a.useState)(),L=Object(l.a)(D,2),U=L[0],_=L[1],F=Object(a.useState)(),G=Object(l.a)(F,2),J=G[0],z=G[1],A=Object(a.useState)(0),H=Object(l.a)(A,2),q=H[0],K=H[1];window._setIndividual=z,window._setGeneration=K,Object(a.useEffect)((function(){window._isRunning=!!U,U&&tt(U)}),[U]),Object(a.useEffect)((function(){I&&P(null);var t=T.filter((function(t){var n=Object(l.a)(t,2),r=n[0],c=n[1];return r[0]<e&&r[1]<i&&c[0]<e&&c[1]<i}));B(t)}),[e,i]);var Q=function(t,n){return function(){if(!U&&!n&&T.length!==g.length*m.length){if(I&&N(I,t))return P(null);if(!I)return P(t);B([].concat(Object(s.a)(T),[[I,t]])),P(null)}}},X=function(t){return function(){var n=T.slice(0,t),e=T.slice(t+1);B([].concat(Object(s.a)(n),Object(s.a)(e)))}};return Object(j.jsx)("div",{className:"h-screen overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-400",children:Object(j.jsxs)("main",{className:"bg-gray-200 md:bg-gray-100 min-h-screen w-full flex flex-col md:flex-row items-stretch",children:[Object(j.jsx)("section",{className:"flex-grow flex items-center justify-center flex-col h-screenpeek md:h-auto sticky top-0",children:Object(j.jsxs)(f,{className:"bg-white relative rounded-xl shadow-2xl",style:{maxWidth:"min(max(calc(".concat(e," / ").concat(i," * 80%), calc(").concat(i," / ").concat(e," * 70vh)), 80%, calc(").concat(e," / ").concat(i," * 70vh))")},width:e,height:i,children:[U&&Object(j.jsx)(rt,{problem:U,individual:J}),!U&&Object(j.jsx)("div",{className:"absolute",children:S(i,(function(t){return S(e,(function(n){var r=[n,t],c=null===T||void 0===T?void 0:T.findIndex((function(t){var n=Object(l.a)(t,2),e=n[0],c=n[1];return N(e,r)||N(c,r)})),a=null!=c&&c>=0,o=I&&N(I,r),u=a?x(c):o?["gray",600]:["gray",300],s=Object(l.a)(u,2),d=s[0],f=s[1];return Object(j.jsx)("button",{className:"absolute ".concat(a||U?"cursor-default":"group"),onClick:Q(r,a),disabled:U||a,style:{left:"calc(100% / ".concat(e," * ").concat(n,")"),top:"calc(100% / ".concat(i," * ").concat(t,")")},children:Object(j.jsx)("div",{className:"transition-colors bg-".concat(d,"-").concat(f," ").concat(o?"ring-4 ring-gray-300":""," ").concat(a?"ring-4 ring-".concat(d,"-100"):"group-hover:bg-gray-600")})},"".concat(n,"-").concat(t))}))}))})]})}),Object(j.jsx)("aside",{className:"md:max-w-xs md:w-1/2 p-8 pt-12 md:pt-8 md:border-l-2 bg-gray-100 z-10 rounded-t-3xl md:rounded-none shadow-blur md:shadow-none md:max-h-screen overflow-y-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-400",children:Object(j.jsxs)("div",{className:"flex flex-col max-w-sm mx-auto",children:[!U&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("section",{children:[Object(j.jsx)(O,{value:e,onChange:r,min:5,max:20,label:"Width"}),Object(j.jsx)(O,{value:i,onChange:u,min:5,max:20,label:"Height",className:"mt-4"}),Object(j.jsxs)("div",{className:"mt-4",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Connections"}),Object(j.jsxs)("div",{className:"border-2 bg-gray-50 rounded-lg px-4 h-40 overflow-y-auto mt-1 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-400",children:[!(null===T||void 0===T?void 0:T.length)&&Object(j.jsx)("div",{className:"text-center text-gray-400 text-sm h-full w-full flex justify-center items-center",children:"No connections found"}),T.map((function(t,n){var e=Object(l.a)(t,2),r=e[0],c=e[1],a=x(n),o=Object(l.a)(a,2),i=o[0],u=o[1];return Object(j.jsxs)("div",{className:"flex items-center py-2 group",children:[Object(j.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ring-2 bg-".concat(i,"-").concat(u," ring-").concat(i,"-100")}),Object(j.jsxs)("span",{className:"text-sm text-gray-600",children:["(",r[0],", ",r[1],") - (",c[0],", ",c[1],")"]}),Object(j.jsx)("button",{className:"p-1 ml-auto hover:opacity-100 opacity-50 transition-opacity focus:outline-none",onClick:X(n),children:Object(j.jsx)(y.a,{className:"group-hover:opacity-100 opacity-30 transition-opacity"})})]},"".concat(r[0],"-").concat(r[1]))}))]})]})]}),Object(j.jsxs)("section",{className:"mt-10",children:[Object(j.jsx)(O,{value:h,onChange:v,min:50,max:1e3,step:50,label:"Population"}),Object(j.jsx)(O,{value:k,onChange:M,min:1,max:80,label:"Mutation chance",className:"mt-4",children:function(t){return Object(j.jsxs)(j.Fragment,{children:[t,"%"]})}})]}),(null===T||void 0===T?void 0:T.length)<2&&Object(j.jsx)("button",{className:"rounded-lg bg-gray-400 text-gray-100 font-bold p-3 mt-10 shadow-lg",disabled:!0,children:"Start"}),(null===T||void 0===T?void 0:T.length)>=2&&Object(j.jsx)("button",{className:"rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors focus:outline-none text-gray-100 font-bold p-3 mt-10 shadow-lg",onClick:function(){var t=V(e,i,T,h,k);_(t),z(void 0)},children:"Start"})]}),U&&Object(j.jsxs)("div",{className:"d-flex justify-center flex-col my-auto",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Generation"}),Object(j.jsx)("div",{className:"mx-auto mb-4",children:q}),Object(j.jsx)("button",{className:"rounded-lg bg-gray-500 hover:bg-gray-600 transition-colors focus:outline-none text-gray-100 font-bold p-3 shadow-lg w-full",onClick:function(){return _(void 0)},children:"Stop"})]})]})})]})})};u.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(ct,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ecb1c935.chunk.js.map