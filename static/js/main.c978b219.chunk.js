(this["webpackJsonpgenetic-pcb"]=this["webpackJsonpgenetic-pcb"]||[]).push([[0],{23:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var c,r,a=n(2),o=n.n(a),i=n(11),u=n.n(i),s=(n(23),n(3)),l=n(1),d=n(12),f=n(15).a.div(c||(c=Object(d.a)(['\n  width: 100%;\n\n  &::before {\n    content: "";\n    display: block;\n    padding-bottom: ',"%;\n  }\n\n  > div {\n    width: calc(100% * ",");\n    height: calc(100% * ",");\n    left: calc(100% / "," / 2);\n    top: calc(100% / "," / 2);\n\n    > button {\n      width: calc(100% / ",");\n      height: calc(100% / ",');      \n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n\n      div {\n        width: 75%;\n        border-radius: 50%;\n        max-width: 0.75rem;\n        &::after {\n          content: "";\n          padding-bottom: 100%;\n          display: block;\n        }\n      }\n    }\n'])),(function(t){return 100*t.height/t.width}),(function(t){var e=t.width;return"".concat(e," / ").concat(e+1)}),(function(t){var e=t.height;return"".concat(e," / ").concat(e+1)}),(function(t){return t.width+1}),(function(t){return t.height+1}),(function(t){return t.width}),(function(t){return t.height})),h=n(4),b=n(17),j=n(0),O=function(t){var e=t.value,n=t.onChange,c=t.children,r=Object(b.a)(t,["value","onChange","children"]);return Object(j.jsxs)("div",{className:"flex w-full",children:[Object(j.jsx)("input",Object(h.a)({type:"range",className:"flex-1",onChange:function(t){var e;if(null!=(null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.value)){var c=parseInt(t.target.value);n(c)}},value:e},r)),Object(j.jsxs)("div",{className:"w-12 font-bold ml-2 text-right",children:[!c&&e,!!c&&c(e)]})]})},g=["red","yellow","green","blue","purple","pink"],v=[0,38,160,217,258,330],m=[500,300,900],p=[60,80,40],x=function(t){return[g[t%g.length],m[Math.floor(t/g.length)%m.length]]},w=function(t){return[v[t%v.length],p[Math.floor(t/v.length)%p.length]]},y=n(16),N=function(t,e){return t[0]===e[0]&&t[1]===e[1]},k=function(t,e){return Object(s.a)(new Array(t)).map((function(t,n){return e(n)}))},S=function(t,e){return[t.slice(0,e),t.slice(e)]},M=n(8),C=n.n(M),E=n(10),I=n(7);!function(t){t.Up="Up",t.Down="Down",t.Left="Left",t.Right="Right"}(r||(r={}));var P=[r.Up,r.Right,r.Down,r.Left],W=function(t,e){var n=(R(t)+Math.floor(e/90))%P.length;return P[n]},R=function(t){var e=P.findIndex((function(e){return e===t}));if(e<0)throw new Error("Incorrect direction passed");return e},B=function(t){if(t===r.Up)return[0,-1];if(t===r.Down)return[0,1];if(t===r.Left)return[-1,0];if(t===r.Right)return[1,0];throw new Error("Incorrect direction passed")},D=function(t){return t===r.Left||t===r.Right},L=function(t,e){return Math.floor(Math.random()*(e-t))+t},U=function(){return Math.random()<.5},T=function(t,e){var n=Object(l.a)(t,2),c=n[0],r=n[1],a=Object(l.a)(e,2),o=a[0],i=a[1],u=B(i),s=Object(l.a)(u,2),d=s[0],f=s[1];return k(o,(function(t){return[c+(t+1)*d,r+(t+1)*f]}))},_=function(t){var e=t.reduce((function(t,e){return t+Object(l.a)(e,2)[1]}),0);return t.reduce((function(t,n){var c,r,a=t.weighed,o=t.progress,i=Object(l.a)(n,2),u=i[0],d=i[1],f=(c=d/e,r=4,Math.round(c*Math.pow(10,r))/Math.pow(10,r));if(0===f)return{weighed:a,progress:o};var h=f+o;return{weighed:[].concat(Object(s.a)(a),[[u,h]]),progress:h}}),{weighed:[],progress:0}).weighed},F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return k(e,(function(){var e=Math.random(),n=t.find((function(t){return Object(l.a)(t,2)[1]>e}))||t[0];return Object(l.a)(n,1)[0]}))},G=.5,J=function(t,e,n,c){var a=Object(l.a)(t,2),o=a[0],i=a[1],u=Object(l.a)(i,2),d=u[0],f=u[1],h=function t(c){if(N(c,i))return[];var a=Object(l.a)(c,2),o=a[0],u=a[1],h=0===o?0:1,b=o===e-1?0:1,j=0===u?0:1,O=u===n-1?0:1;o>d&&(h+=(o-d)*G),o<d&&(b+=(d-o)*G),u>f&&(j+=(u-f)*G),u<f&&(O+=(f-u)*G);var g=[[r.Left,h],[r.Right,b],[r.Up,j],[r.Down,O]],v=F(_(g),1),m=Object(l.a)(v,1)[0],p=m===r.Up?u:m===r.Down?n-u:m===r.Left?o:e-o,x=L(1,p);(o===d&&function(t){return t===r.Up||t===r.Down}(m)||u===f&&D(m))&&(T(c,[x,m]).find((function(t){return N(t,i)}))&&(x=Math.abs(o-d+u-f)));var w=m===r.Up?[o,u-x]:m===r.Down?[o,u+x]:m===r.Left?[o-x,u]:[o+x,u];return[[x,m]].concat(Object(s.a)(t(w)))}(o);return{start:o,index:c,segments:z(h)}},z=function(t){return t.length<2?t:t.reduce((function(t,e){if(0===t.length)return[e];var n=Object(l.a)(e,2),c=n[0],r=n[1],a=S(t,-1),o=Object(l.a)(a,2),i=o[0],u=Object(l.a)(o[1],1)[0],d=Object(l.a)(u,2),f=d[0],h=d[1];if(h===r)return[].concat(Object(s.a)(i),[[f+c,r]]);if(h===W(r,180)){var b=f-c;if(0===b)return i;var j=b<0?r:W(r,180);return[].concat(Object(s.a)(i),[[Math.abs(b),j]])}return[].concat(Object(s.a)(t),[[c,r]])}),[])},A=function(t,e){if(L(0,100)>e.mutationChance)return t;var n=t.segments,c=e.width,r=e.height,a=L(0,t.segments.length),o=function(t,e,n){var c=Object(l.a)(t,2),r=c[0],a=c[1],o=W(a,U()?90:270),i=L(1,D(a)?n:e);if(1==r||U())return[[i,o],[r,a],[i,W(o,180)]];var u=L(1,r);return U()?[[i,o],[u,a],[i,W(o,180)],[r-u,a]]:[[u,a],[i,o],[r-u,a],[i,W(o,180)]]}(n[a],c,r),i=[].concat(Object(s.a)(n.slice(0,a)),Object(s.a)(o),Object(s.a)(n.slice(a+1))),u=z(i);return Object(h.a)(Object(h.a)({},t),{},{segments:u})},H=function(t){var e,n=t.segments,c=t.start;return{index:t.index,start:(e=c,[e[0],e[1]]),segments:n.map((function(t){return function(t){return[t[0],t[1]]}(t)}))}},q=function(t){return t.paths.reduce((function(t,e){return[].concat(Object(s.a)(t),Object(s.a)(function(t){var e=t.segments,n=t.start,c=t.index,r={coordinates:[n],start:n};return e.reduce((function(t,e){var n=t.coordinates,c=t.start,r=T(c,e),a=S(r,-1),o=Object(l.a)(a,2),i=Object(l.a)(o[1],1)[0];return{coordinates:[].concat(Object(s.a)(n),Object(s.a)(r)),start:i}}),r).coordinates.map((function(t){var e=Object(l.a)(t,2);return[e[0],e[1],c]}))}(e)))}),[])},K=function(t,e){var n=e.width,c=e.height,r=q(t);return{outOfBounds:Object.entries(r.filter((function(t){var e=Object(l.a)(t,2),r=e[0],a=e[1];return r<0||a<0||r>=n||a>=c})).reduce((function(t,e){var n,c=Object(l.a)(e,3)[2];return Object(h.a)(Object(h.a)({},t),{},Object(I.a)({},c,(null!==(n=null===t||void 0===t?void 0:t[c])&&void 0!==n?n:0)+1))}),{})),duplication:Object.values(r.reduce((function(t,e){var n,c=Object(l.a)(e,3),r=c[0],a=c[1],o=c[2];return Object(h.a)(Object(h.a)({},t),{},Object(I.a)({},"".concat(r,"-").concat(a),[].concat(Object(s.a)(null!==(n=null===t||void 0===t?void 0:t["".concat(r,"-").concat(a)])&&void 0!==n?n:[]),[o])))}),{})).filter((function(t){return t.length>1})),length:r.length}},Q=function(t,e){var n=function(t,e){var n=t.paths,c=e.outOfBoundsWeights,r=e.duplicationWeights,a=K(t,e),o=a.outOfBounds.reduce((function(t,e){var n=Object(l.a)(e,2),r=n[0],a=n[1];return t+Math.pow(c[parseInt(r)],a)}),0),i=a.duplication.reduce((function(t,e){return t+e.reduce((function(t,e){return t*r[e]}),1)}),0),u=n.reduce((function(t,e){return t+e.segments.length}),0);return 1/(a.length+u+o+i)}(t,e);return Object(h.a)(Object(h.a)({},t),{},{fitness:n})},V=function(t,e,n,c,r){var a=k(c,(function(){return function(t,e,n){return{paths:n.map((function(n,c){return J(n,t,e,c)}))}}(t,e,n)}));return{width:t,height:e,connectors:n,population:a,duplicationWeights:k(n.length,(function(){return t*e})),outOfBoundsWeights:k(n.length,(function(){return t*e})),mutationChance:r}},X=function(t){var e=t.population.map((function(e){return Q(e,t)}));return Object(h.a)(Object(h.a)({},t),{},{population:e})},Y=function(t){var e=t.population;return e.reduce((function(t,e){if(null==(null===e||void 0===e?void 0:e.fitness))throw new Error("The fitness has not been calculated!");if(null==(null===t||void 0===t?void 0:t.fitness))throw new Error("The fitness has not been calculated!");return e.fitness>t.fitness?e:t}),e[0])},Z=function(t,e){var n=e.duplicationWeights,c=e.outOfBoundsWeights,r=Y(e);if(null==(null===t||void 0===t?void 0:t.fitness))throw new Error("The fitness has not been calculated!");if(null==(null===r||void 0===r?void 0:r.fitness))throw new Error("The fitness has not been calculated!");if(t.fitness<=r.fitness)return e;var a=K(r,e),o=new Set;a.outOfBounds.forEach((function(t){var e=Object(l.a)(t,1)[0];return o.add(e)}));var i=c.map((function(t,e){return o.has(e.toString())?t+1:t})),u=new Set;a.duplication.forEach((function(t){return t.forEach((function(t){return u.add(t)}))}));var s=n.map((function(t,e){return u.has(e)?t+1:t}));return Object(h.a)(Object(h.a)({},e),{},{outOfBoundsWeights:i,duplicationWeights:s})},$=function(t){var e=t.population,n=_(e.map((function(t){if(null==t.fitness)throw new Error("Fitness not calculated");return[t,t.fitness]}))),c=e.map((function(){var e=F(n);return function(t,e){var n=t.paths.map((function(t){return A(t,e)}));return Object(h.a)(Object(h.a)({},t),{},{paths:n})}(function(t,e){var n=t.paths,c=e.paths,r=L(0,n.length+1);return{paths:[].concat(Object(s.a)(n.slice(0,r).map((function(t){return H(t)}))),Object(s.a)(c.slice(r).map((function(t){return H(t)}))))}}(e[0],e[1]),t)}));return Object(h.a)(Object(h.a)({},t),{},{population:c})},tt=function(){var t=Object(E.a)(C.a.mark((function t(e){var n,c,r,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,c=function(){var t=Object(E.a)(C.a.mark((function t(e,r){var a,o,i,u;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window._setGeneration(n),window._isRunning){t.next=3;break}return t.abrupt("return");case 3:return n++%5===0&&window._setIndividual(r),a=$(e),o=X(a),i=Z(r,o),u=Y(i),t.next=10,new Promise((function(t){return setTimeout(t,1)}));case 10:return t.next=12,c(i,u);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),r=X(e),a=Y(r),t.next=6,c(r,a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),et=n(14),nt=function(t){return 50*(t+1)},ct=function(t){var e=t.individual,n=t.problem,c=Object(a.useRef)(null),r=n.width,o=n.height,i=n.connectors;return Object(a.useEffect)((function(){var t=c.current;if(t){var n=t.getContext("2d");if(n){n.fillStyle="#dddddd",n.clearRect(0,0,t.width,t.height);for(var a=0;a<r;a++)for(var u=nt(a),s=0;s<o;s++){var d=nt(s);n.beginPath(),n.arc(u,d,6,0,2*Math.PI),n.fill(),n.closePath()}for(var f=0;f<i.length;f++){var h=Object(l.a)(i[f],2),b=Object(l.a)(h[0],2),j=b[0],O=b[1],g=Object(l.a)(h[1],2),v=g[0],m=g[1],p=w(f),x=Object(l.a)(p,2),y=x[0],N=x[1];n.fillStyle="hsl(".concat(y,", 90%, ").concat(N,"%)"),n.beginPath(),n.arc(nt(j),nt(O),6*1.2,0,2*Math.PI),n.arc(nt(v),nt(m),6*1.2,0,2*Math.PI),n.fill(),n.closePath()}if(e){var k=e.paths;n.lineWidth=6,n.lineCap="round",n.lineJoin="round";for(var S=0;S<k.length;S++){var M=k[S],C=M.start,E=M.segments,I=Object(l.a)(C,2),P=I[0],W=I[1],R=w(S),D=Object(l.a)(R,2),L=D[0],U=D[1];n.strokeStyle="hsl(".concat(L,", 90%, ").concat(U,"%)"),n.beginPath(),n.moveTo(nt(P),nt(W));var T,_=Object(et.a)(E);try{for(_.s();!(T=_.n()).done;){var F=Object(l.a)(T.value,2),G=F[0],J=F[1],z=B(J),A=Object(l.a)(z,2),H=A[0],q=A[1],K=P+G*H,Q=W+G*q;n.lineTo(nt(K),nt(Q)),P=K,W=Q}}catch(V){_.e(V)}finally{_.f()}n.stroke(),n.closePath()}}}}}),[e,n]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("canvas",{ref:c,className:"absolute left-0 top-0 bottom-0 right-0 w-full h-full",width:50*(r+1),height:50*(o+1)})})},rt=function(){var t=Object(a.useState)(8),e=Object(l.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(8),o=Object(l.a)(r,2),i=o[0],u=o[1],d=Object(a.useState)(100),h=Object(l.a)(d,2),b=h[0],v=h[1],p=Object(a.useState)(10),w=Object(l.a)(p,2),S=w[0],M=w[1],C=Object(a.useState)(null),E=Object(l.a)(C,2),I=E[0],P=E[1],W=Object(a.useState)([]),R=Object(l.a)(W,2),B=R[0],D=R[1],L=Object(a.useState)(),U=Object(l.a)(L,2),T=U[0],_=U[1],F=Object(a.useState)(),G=Object(l.a)(F,2),J=G[0],z=G[1],A=Object(a.useState)(0),H=Object(l.a)(A,2),q=H[0],K=H[1];window._setIndividual=z,window._setGeneration=K,Object(a.useEffect)((function(){window._isRunning=!!T,T&&tt(T)}),[T]),Object(a.useEffect)((function(){var t=B.filter((function(t){var e=Object(l.a)(t,2),c=e[0],r=e[1];return c[0]<n&&c[1]<i&&r[0]<n&&r[1]<i}));D(t)}),[n,i]);var Q=function(t,e){return function(){if(!T&&!e&&B.length!==g.length*m.length){if(I&&N(I,t))return P(null);if(!I)return P(t);D([].concat(Object(s.a)(B),[[I,t]])),P(null)}}},X=function(t){return function(){var e=B.slice(0,t),n=B.slice(t+1);D([].concat(Object(s.a)(e),Object(s.a)(n)))}};return Object(j.jsx)("div",{className:"h-screen overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-400",children:Object(j.jsxs)("main",{className:"bg-gray-200 md:bg-gray-100 min-h-screen w-full flex flex-col md:flex-row items-stretch",children:[Object(j.jsx)("section",{className:"flex-grow flex items-center justify-center flex-col h-screenpeek md:h-auto sticky top-0",children:Object(j.jsxs)(f,{className:"bg-white relative rounded-xl shadow-2xl",style:{maxWidth:"min(max(calc(".concat(n," / ").concat(i," * 80%), calc(").concat(i," / ").concat(n," * 70vh)), 80%, calc(").concat(n," / ").concat(i," * 70vh))")},width:n,height:i,children:[T&&Object(j.jsx)(ct,{problem:T,individual:J}),!T&&Object(j.jsx)("div",{className:"absolute",children:k(i,(function(t){return k(n,(function(e){var c=[e,t],r=null===B||void 0===B?void 0:B.findIndex((function(t){var e=Object(l.a)(t,2),n=e[0],r=e[1];return N(n,c)||N(r,c)})),a=null!=r&&r>=0,o=I&&N(I,c),u=a?x(r):o?["gray",600]:["gray",300],s=Object(l.a)(u,2),d=s[0],f=s[1];return Object(j.jsx)("button",{className:"absolute ".concat(a||T?"cursor-default":"group"),onClick:Q(c,a),disabled:T||a,style:{left:"calc(100% / ".concat(n," * ").concat(e,")"),top:"calc(100% / ".concat(i," * ").concat(t,")")},children:Object(j.jsx)("div",{className:"bg-".concat(d,"-").concat(f," ").concat(o?"ring-4 ring-gray-300":""," ").concat(a?"ring-4 ring-".concat(d,"-100"):"group-hover:bg-gray-600")})},"".concat(e,"-").concat(t))}))}))})]})}),Object(j.jsx)("aside",{className:"md:max-w-xs md:w-1/2 p-8 pt-12 md:pt-8 md:border-l-2 bg-gray-100 z-10 rounded-t-3xl md:rounded-none shadow-blur md:shadow-none md:max-h-screen overflow-y-auto scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-400",children:Object(j.jsxs)("div",{className:"flex flex-col max-w-sm mx-auto",children:[!T&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("section",{children:[Object(j.jsxs)("label",{className:"block",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Width"}),Object(j.jsx)(O,{value:n,onChange:c,min:5,max:20})]}),Object(j.jsxs)("label",{className:"mt-4 block",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Height"}),Object(j.jsx)(O,{value:i,onChange:u,min:5,max:20})]}),Object(j.jsxs)("div",{className:"mt-4",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Connections"}),Object(j.jsxs)("div",{className:"border-2 bg-gray-50 rounded-lg px-4 h-40 overflow-y-auto mt-1 scrollbar-thin scrollbar-thumb-rounded scrollbar-thumb-gray-400",children:[!(null===B||void 0===B?void 0:B.length)&&Object(j.jsx)("div",{className:"text-center text-gray-400 text-sm h-full w-full flex justify-center items-center",children:"No connections found"}),B.map((function(t,e){var n=Object(l.a)(t,2),c=n[0],r=n[1],a=x(e),o=Object(l.a)(a,2),i=o[0],u=o[1];return Object(j.jsxs)("div",{className:"flex items-center py-2 group",children:[Object(j.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ring-2 bg-".concat(i,"-").concat(u," ring-").concat(i,"-100")}),Object(j.jsxs)("span",{className:"text-sm text-gray-600",children:["(",c[0],", ",c[1],") - (",r[0],", ",r[1],")"]}),Object(j.jsx)("button",{className:"p-1 ml-auto hover:opacity-100 opacity-50 transition-opacity focus:outline-none",onClick:X(e),children:Object(j.jsx)(y.a,{className:"group-hover:opacity-100 opacity-30 transition-opacity"})})]},"".concat(c[0],"-").concat(c[1]))}))]})]})]}),Object(j.jsxs)("section",{className:"mt-10",children:[Object(j.jsxs)("label",{className:"block",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Population"}),Object(j.jsx)(O,{value:b,onChange:v,min:50,max:1e3,step:50})]}),Object(j.jsxs)("label",{className:"mt-4 block",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Mutation chance"}),Object(j.jsx)(O,{value:S,onChange:M,min:1,max:80,step:1,children:function(t){return Object(j.jsxs)(j.Fragment,{children:[t,"%"]})}})]})]}),(null===B||void 0===B?void 0:B.length)<2&&Object(j.jsx)("button",{className:"rounded-lg bg-gray-400 text-gray-100 font-bold p-3 mt-10 shadow-lg",disabled:!0,children:"Start"}),(null===B||void 0===B?void 0:B.length)>=2&&Object(j.jsx)("button",{className:"rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors focus:outline-none text-gray-100 font-bold p-3 mt-10 shadow-lg",onClick:function(){var t=V(n,i,B,b,S);_(t),z(void 0)},children:"Start"})]}),T&&Object(j.jsxs)("div",{className:"d-flex justify-center flex-col my-auto",children:[Object(j.jsx)("h1",{className:"font-bold text-gray-700",children:"Generation"}),Object(j.jsx)("div",{className:"mx-auto mb-4",children:q}),Object(j.jsx)("button",{className:"rounded-lg bg-gray-500 hover:bg-gray-600 transition-colors focus:outline-none text-gray-100 font-bold p-3 shadow-lg w-full",onClick:function(){return _(void 0)},children:"Stop"})]})]})})]})})};u.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(rt,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.c978b219.chunk.js.map